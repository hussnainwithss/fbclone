{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>{% block title %}UBook{% endblock title %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Hussnain Ahmad">
  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->

  {% block css %}
  <!-- Latest compiled and minified Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
  <!-- font awesome -->
  <link href="{% static 'fontawesome_free/css/all.min.css' %}" rel="stylesheet" type="text/css">
  <!-- custom css -->
  <link href="{% static 'css/main.css' %}" rel="stylesheet">
  {% endblock %}

  
</head>

<body>
  <div class="container-fluid no-padding">
  {% block body %}
  {% if messages %}
  <div class="messages">
    {% for message in messages %}

    <div class="alert alert-dismissible fade show alert-{{ message.level_tag }}" role="alert">
      <strong>{{message}}</strong>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <header>
      <div class="row align-items-center">
        <div class="col-sm-6">
        <div class="row">
          <div class="col-md-2"> <div class="logo"><a href={% url 'user_profile:dashboard' %}>UBook</a></div></div>
          {% if user.is_authenticated and user.profile %}
          <div class="col-md-7 ">  
            <form class="d-flex" method="GET" action={% url 'user_profile:search' %}>
            <input class="form-control has-feedback-left" type="search" placeholder="Search UBook" aria-label="Search" name='search_query'>
          </form>
        </div>
        {% endif %}
        </div>
          
        </div>
        <div class="col-sm-6 ">
          {% block header-content %}
          {% if user.is_authenticated and user.profile %}
          <div class='row float-end'>
           <div class=" col-auto profile-badge">
           <a href={% url 'user_profile:settings' %}>
              <img src={% if user.profile.profile_picture %} {{user.profile.profile_picture.url}} {% else %} {%static 'images/user.png' %} {% endif %} class='rounded-circle '>
              {{user.first_name}}
              </a>
            </div>
          
            <div class='col-auto form-group'>
              <form action={% url 'accounts:logout' %} method="POST">
                {% csrf_token %}
                <input type="submit" value="Logout" class="btn  btn-danger">
              </form>
            </div>
            <div class="col-md-3"></div>
          </div>
          {% else %}
        <form method="POST" action={% url 'accounts:login' %}>
          {% csrf_token %}
          <div class="row">
            <div class="col-sm-5">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Email Address" name='email'
                  value='{% if request.session.email %}{{request.session.email}}{% endif %}' required>
                <div class="login-bottom-text checkbox hidden-sm">
                  <input class="form-check-input" type="checkbox" id="rememberMe" name='remember-me'>
                  <label class="form-check-label" for="rememberMe">
                    Remember Me
                  </label>
                </div>
              </div>
            </div>
            <div class="col-sm-5">
              <div class="form-group">
                <input type="password" class="form-control" placeholder="Password" name='password' required>
                <div class="login-bottom-text hidden-sm"><a href={% url 'accounts:password_reset' %}> Forgot your
                    password?
                  </a></div>
              </div>
            </div>
            <div class="col-sm-2    ">
              <div class="form-group ">
                <input type="submit" value="login" class="btn  btn-success">
              </div>
            </div>
          </div>
        </form>
        {% endif %}
       </div>
        
        {% endblock %}
      </div>
  </header>
  
  {% block body-content %}

  {% endblock %}
  
  {% endblock %}
</div>

{% block javascript %}

  <!-- Bootstrap JS and its dependencies -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
    crossorigin="anonymous"></script>
    <!-- Jquery -->
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
  var today = new Date();
var dd = today.getDate();
var mm = today.getMonth()+1; //January is 0!
var yyyy = today.getFullYear();
 if(dd<10){
        dd='0'+dd
    } 
    if(mm<10){
        mm='0'+mm
    } 

today = yyyy+'-'+mm+'-'+dd;
$("[type*='date']").attr('max',today);
 </script>
  {% endblock javascript %}
</body>

</html>